<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fale conosco</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <link rel="stylesheet" href="/estilos/style5.css">
  </head>
  <body>
    <section>
        <div class="voltar">
            <a href="/sobre">
            <span class="material-symbols-outlined">
                arrow_back_ios
            </span>
            </a>
        </div>
    </section>
    <main>
        <div class="container">
            <div class="item5">
                <h2 style="text-align: center; font-family: 'Merriweather'; color: orange;">Confira abaixo se sua dúvida está aqui</h2>
                <p style="text-align: center;">Caso não esteja, contate o suporte.</p>
            </div>
            <div class="item1">
                <div class="card" style="width: 300px;">
                    <div class="card-body">
                        <h5 class="card-title">Cancelar reserva</h5>
                        <h6 class="card-subtitle mb-2 text-body-secondary">Card subtitle</h6>
                        <p class="card-text">Cancele sua reserva por aqui</p>
                        <button type="button" class="btn btn-danger" data-bs-target="#modalCancelar" data-bs-toggle="modal">Cancelar</button>
                    </div>
                </div>
            </div>
            <div class="item2">
                <div class="card" style="width: 300px;">
                    <div class="card-body">
                        <h5 class="card-title">Se eu não comparecer no dia da reserva existe alguma punição?</h5>
                        <h6 class="card-subtitle mb-2 text-body-secondary">Sim, pode ter uma punição</h6>
                        <p class="card-text">Será cobrado uma taxa por reservar uma mesa e não ir, assim como você aceitou no contrato de politicidade</p>
                    </div>
                </div>
            </div>

            <div class="item3">
                <div class="card" style="width: 300px;">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <h6 class="card-subtitle mb-2 text-body-secondary">Card subtitle</h6>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card’s content.</p>
                        <a href="#" class="card-link">Card link</a>
                        <a href="#" class="card-link">Another link</a>
                    </div>
                </div>
            </div>
            <div class="item4">
                <div class="card" style="width: 300px;">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <h6 class="card-subtitle mb-2 text-body-secondary">Card subtitle</h6>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card’s content.</p>
                        <a href="#" class="card-link">Card link</a>
                        <a href="#" class="card-link">Another link</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL -->
        <div class="modal fade" id="modalCancelar" tabindex="-1" aria-labelledby="modalCancelarLabel" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="modalCancelarLabel">Cancelar reserva</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
           <form id="formCancelarReserva" class="modal-content" method="POST">
                <label for="iemail" class="form-label">Email</label>
                <input type="email" name="email" id="iemail" class="form-control" required>

                <label for="idata" class="form-label">Data da reserva</label>
                <input type="date" name="data" id="idata" class="form-control" required>

                <label for="ihor" class="form-label">Horario da reserva</label>
                <input type="time" name="hora" id="ihor" class="form-control" required>
           </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            <button type="button" id="btnCancelar" class="btn btn-danger">Remover</button>
        </div>
        </div>
    </div>
    </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script>
        document.getElementById('btnCancelar').addEventListener('click', async function() {
            const email = document.getElementById('iemail')
            const data = document.getElementById('idata')
            const horario = document.getElementById('ihor')
            
            const res = await fetch('/api/delete', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                 },
                body: JSON.stringify({
                    email: email.value,
                    date: data.value,
                    time: horario.value
                })
            })
            
            const dados = await res.json();

            if(dados.message === "Reserva cancelada com sucesso"){
                alert("Reserva cancelada!");
                console.log("Reserva cancelada, BOOM!")
            }

            const modal = bootstrap.Modal.getInstance(document.getElementById('modalCancelar'))
            modal.hide()
    })
        
    </script>
  </body>
</html>